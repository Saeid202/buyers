# بازار نو

فروشگاه اینترنتی فارسی برای نمایش و ثبت سفارش محصولات دیجیتال، گجت های پوشیدنی و لوازم خانه هوشمند با استفاده از **Next.js 14 (App Router)** و طراحی راست به چپ.

## امکانات اصلی
- صفحه اصلی با دسته بندی، محصولات منتخب و جدیدترین کالاها
- صفحه جزئیات محصول با گالری تصاویر، مشخصات فنی و افزودن به سبد خرید
- مدیریت سبد خرید در سطح اپلیکیشن (Context + LocalStorage)
- صفحه سبد خرید و فرم ثبت سفارش بدون پرداخت آنلاین
- طراحی واکنش گرا، فونت فارسی Vazirmatn و پشتیبانی کامل RTL
- احراز هویت و ذخیره داده ها با [Supabase](https://supabase.com)

## پیش نیازها
- Node.js 18 به بالا
- npm 9 یا جدیدتر
- حساب Supabase و پروژه فعال

## راه اندازی پروژه
```bash
npm install
npm run dev
```
سپس در مرورگر به آدرس [http://localhost:3000](http://localhost:3000) سر بزنید.

### تنظیم متغیرهای محیطی
یک فایل `.env.local` در ریشه پروژه ایجاد کنید:
```
NEXT_PUBLIC_SUPABASE_URL=your_supabase_url
NEXT_PUBLIC_SUPABASE_ANON_KEY=your_public_anon_key
```
در صورت استفاده از کلیدهای سِرویس برای عملیات سروری، آن را نیز به صورت ایمن ذخیره کنید (در سمت کلاینت قرار ندهید).

## اسکریپت ها
| دستور | توضیح |
|-------|-------|
| `npm run dev` | اجرای سرور توسعه Next.js با Webpack |
| `npm run build` | ساخت نسخه تولید |
| `npm run start` | اجرای نسخه تولید |
| `npm run lint` | بررسی کد با ESLint |
| `npm run test` | اجرای تست ها با Vitest |

## ساختار شاخه ها
```
src/
 ├─ app/                 صفحات و API های Next.js
 ├─ components/          اجزای رابط کاربری (مشترک، محصول، سبد)
 ├─ data/                داده های نمونه محصولات
 ├─ hooks/               قلاب های کاربردی (مانند useCart)
 ├─ lib/                 توابع کمکی (قالب بندی قیمت، کلاینت Supabase و ...)
 └─ providers/           کانتکست و Provider سبد خرید
```

## تست ها
پروژه از **Vitest** و **Testing Library** برای تست واحد استفاده می کند. برای اجرای تست ها:
```bash
npm run test
```
فایل پیکربندی در `vitest.config.ts` و اسکریپت آماده سازی در `vitest.setup.ts` قرار دارد.

## پیکربندی SEO
- متادیتای صفحات در فایل های مربوطه تعریف شده است.
- `app/sitemap.ts` و `app/robots.ts` به صورت دینامیک آدرس ها را تولید می کنند. مقدار `NEXT_PUBLIC_SITE_URL` را برای پایه آدرس ها تنظیم کنید.

## انتشار
برای انتشار نهایی می توانید از Vercel یا هر سرویس سازگار با Next.js استفاده کنید. پیش از دیپلوی، دستورهای زیر توصیه می شود:
```bash
npm run lint
npm run test
npm run build
```
